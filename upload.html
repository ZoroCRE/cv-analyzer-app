<!-- upload.html -->
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CV Uploader</title>
  <script src="[https://cdn.tailwindcss.com](https://cdn.tailwindcss.com)"></script>
  <style>
    body { font-family: 'Segoe UI', sans-serif; }
    .dark-mode { background-color: #1a1a2e; color: #e0e0e0; }
  </style>
</head>
<body class="dark-mode">
  <div class="container mx-auto max-w-2xl p-8 mt-20 bg-[#162447] rounded-2xl shadow-lg">
    <h1 class="text-3xl font-bold text-white text-center mb-6">Upload & Analyze CVs</h1>
    <form id="cv-form">
      <div class="mb-6">
        <label for="keywords" class="block text-lg font-semibold mb-2 text-slate-300">Enter Keywords</label>
        <input type="text" id="keywords" name="keywords" placeholder="e.g., Python, Data Analysis, Project Management" class="w-full p-3 bg-[#2a3b5c] border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-sky-500 focus:outline-none">
      </div>
      <div class="mb-6">
        <label for="cv-upload" class="block text-lg font-semibold mb-2 text-slate-300">Upload CVs</label>
        <div id="upload-box" class="flex flex-col items-center justify-center w-full min-h-[150px] border-2 border-dashed border-slate-600 rounded-lg bg-[#1f2a51] text-center p-4 cursor-pointer hover:border-sky-500">
          <p id="upload-text" class="text-slate-400">Drag & drop files here or click to select</p>
          <input type="file" id="cv-upload" name="files" class="hidden" accept=".pdf,.doc,.docx,.jpg,.png" multiple>
        </div>
        <div id="file-list-container" class="mt-4"><ul id="file-list" class="list-none p-0"></ul></div>
      </div>
      <button type="submit" id="submit-btn" class="w-full p-3 text-lg font-bold bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors disabled:bg-slate-500">Analyze and Submit</button>
    </form>
  </div>
  <script>
    const API_ENDPOINT = '[https://cv-analyzer-app.vercel.app/api/analyze](https://cv-analyzer-app.vercel.app/api/analyze)'; // <-- YOUR BACKEND URL
    const form = document.getElementById('cv-form');
    const fileInput = document.getElementById('cv-upload');
    const uploadBox = document.getElementById('upload-box');
    
    uploadBox.addEventListener('click', () => fileInput.click());
    // Drag & Drop events...
    
    form.addEventListener('submit', function(event) {
      event.preventDefault();
      const formData = new FormData(form);
      const submitButton = document.getElementById('submit-btn');
      submitButton.textContent = 'Analyzing...';
      submitButton.disabled = true;

      fetch(API_ENDPOINT, { method: 'POST', body: formData })
      .then(response => response.json())
      .then(data => {
        if (data.status === 'success' && data.submissionId) {
          // Redirect to the dashboard with the submission ID
          window.location.href = `/index.html?submission_id=${data.submissionId}`;
        } else {
          alert('An error occurred: ' + data.message);
          submitButton.textContent = 'Analyze and Submit';
          submitButton.disabled = false;
        }
      })
      .catch(error => {
        alert('A network error occurred.');
        console.error('Error:', error);
        submitButton.textContent = 'Analyze and Submit';
        submitButton.disabled = false;
      });
    });
  </script>
</body>
</html>
